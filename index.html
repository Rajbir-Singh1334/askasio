<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Voice AI Assistant</title>
<style>
  body { font-family: sans-serif; text-align: center; margin-top: 50px; }
  #avatar { width: 200px; height: 200px; background: url('avatar.png') center/cover; margin: 20px auto; }
  .talking { animation: talk 0.4s infinite; }
  @keyframes talk { 0%,100%{transform:scaleY(1)}50%{transform:scaleY(0.9)} }
</style>
</head>
<body>

<h2>ğŸ™ï¸ Voice AI Assistant</h2>
<div id="avatar"></div>
<button id="startBtn">Start Talking</button>

<script>
const OPENAI_API_KEY = "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";

const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = "en-US";

document.getElementById("startBtn").onclick = () => {
  recognition.start();
  console.log("Listening...");
};

recognition.onresult = async (event) => {
  const userSpeech = event.results[0][0].transcript;
  console.log("User:", userSpeech);
  const aiReply = await askGPT(userSpeech);
  speak(aiReply);
};

async function askGPT(text) {
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${OPENAI_API_KEY}`
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [{ role: "user", content: text }]
    })
  });
  const data = await response.json();
  return data.choices[0].message.content;
}

function speak(text) {
  const avatar = document.getElementById("avatar");
  avatar.classList.add("talking");
  const utter = new SpeechSynthesisUtterance(text);
  utter.onend = () => avatar.classList.remove("talking");
  speechSynthesis.speak(utter);
}
</script>

</body>
</html>
